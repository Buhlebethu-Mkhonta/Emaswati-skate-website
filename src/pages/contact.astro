---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Contact Us - Emaswati Skate">
    <section>
        <!-- Hero Section -->
        <div class="hero bg-base-200">
            <div class="hero-content text-center">
                <div class="max-w-lg">
                <h1 class="text-5xl font-bold">Get In Touch with Emaswati Skate </h1>
                <p class="py-6">
                    Your Support empowers Eswatini youth through skateboarding.
                    Whether you have questions, want to volunteer, or partner with us, we'd love to hear from you!
                </p>
                </div>
            </div>
        </div>

        <!-- Contact Info & Form Section -->
        <div id="contact-form" class="flex items-center justify-center bg-base-200 py-10">
            <div class="w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 gap-8 bg-base-100 rounded-xl shadow p-6 md:p-10">
                <!-- Left: Info Card -->
                <div class="flex flex-col justify-between border-r border-base-300 pr-0 md:pr-8">
                    <div>
                        <h2 class="text-xl md:text-2xl font-semibold mb-4">Our Information</h2>
                        <ul class="space-y-4 text-base-content">
                            <li class="flex items-start gap-3">
                                <i class='fa-solid fa-location-dot text-xl text-primary'></i>
                                <span>M4JR+HXF Corner Gwamile and, Mbovane St, Mbabane, Eswatini</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <i class='fa-solid fa-phone text-xl text-primary'></i>
                                <span>+268 761 787 55</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <i class='fa-solid fa-envelope text-xl text-primary'></i>
                                <span>emaswatiskate@gmail.com</span>
                            </li>
                        </ul>

                        <h2 class="text-xl md:text-2xl font-semibold mt-4 mb-4">Socials</h2>
                        <div class="space-y-4 text-base-content">
                            <li class="flex items-start gap-3">
                                <a href="https://www.instagram.com/eswatini_skateboarding/" target="_blank" rel="noopener noreferrer" aria-label="Instagram" class="hover:text-primary"><i class="fa-brands fa-instagram text-xl "></i></a>
                                <a href="https://www.instagram.com/eswatini_skateboarding/" target="_blank" rel="noopener noreferrer" aria-label="facebook" class="hover:text-primary"><i class='fa-brands fa-facebook-f text-xl'></i></a>
                                <a href="https://www.youtube.com/channel/UCZxXqHk8lTqd5cw2PNmi2OA" target="_blank" rel="noopener noreferrer" aria-label="YouTube" class="hover:text-primary"><i class="fa fa-youtube text-xl"></i></a>
                            </li>
                        </div>
                    </div>
                </div>
                
                <!-- Right: Contact Form -->
                <div>
                    <h2 class="text-xl md:text-2xl font-semibold mb-4">Send Us a Message</h2>
                    
                    <!-- Success Message -->
                    <div id="success-message" class="alert alert-success mb-4 hidden">
                        <i class="fa-solid fa-check-circle"></i>
                        <span>Thank you! Your message has been sent successfully.</span>
                    </div>
                    
                    <!-- Error Message -->
                    <div id="error-message" class="alert alert-error mb-4 hidden">
                        <i class="fa-solid fa-exclamation-triangle"></i>
                        <span>Sorry, there was an error sending your message. Please try again.</span>
                    </div>
                    
                    <form id="contact-form-element" class="space-y-4">
                        <div>
                            <label for="contact-name" class="block text-sm font-medium mb-1">Your Name</label>
                            <input id="contact-name" name="name" type="text" class="input input-bordered w-full" required />
                        </div>
                        <div>
                            <label for="contact-email" class="block text-sm font-medium mb-1">Your Email</label>
                            <input id="contact-email" name="email" type="email" class="input input-bordered w-full" required />
                        </div>
                        <div>
                            <label for="contact-subject" class="block text-sm font-medium mb-1">Subject</label>
                            <input id="contact-subject" name="title" type="text" class="input input-bordered w-full" placeholder="Regarding partnership opportunity" required />
                        </div>
                        <div>
                            <label for="contact-message" class="block text-sm font-medium mb-1">Message</label>
                            <textarea id="contact-message" name="message" class="textarea textarea-bordered w-full min-h-[90px]" placeholder="Type your message here..." required></textarea>
                        </div>
                        <button type="submit" id="submit-btn" class="btn btn-base-300 w-full mt-2 hover:text-white hover:btn-primary transition duration-200 ease-in-out">
                            <span id="btn-text">Send Message</span>
                            <span id="btn-loading" class="loading loading-spinner loading-sm hidden"></span>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- EmailJS Script -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
        // Initialize EmailJS with your public key
        (function() {
            emailjs.init("O9Q9go0LF6Ek21iRd");
        })();

        // Form submission handler
        document.getElementById('contact-form-element').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const submitBtn = document.getElementById('submit-btn');
            const btnText = document.getElementById('btn-text');
            const btnLoading = document.getElementById('btn-loading');
            const successMessage = document.getElementById('success-message');
            const errorMessage = document.getElementById('error-message');
            
            // Hide previous messages
            successMessage.classList.add('hidden');
            errorMessage.classList.add('hidden');
            
            // Show loading state
            btnText.classList.add('hidden');
            btnLoading.classList.remove('hidden');
            submitBtn.disabled = true;
            
            // Send email using EmailJS
            emailjs.sendForm('service_91diz8g', 'template_xqtc60e', this)
                .then(function() {
                    // Success
                    successMessage.classList.remove('hidden');
                    document.getElementById('contact-form-element').reset();
                    
                    // Scroll to success message
                    successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, function(error) {
                    // Error
                    console.log('EmailJS Error:', error);
                    errorMessage.classList.remove('hidden');
                    
                    // Scroll to error message
                    errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                })
                .finally(function() {
                    // Reset button state
                    btnText.classList.remove('hidden');
                    btnLoading.classList.add('hidden');
                    submitBtn.disabled = false;
                });
        });
    </script>
</Layout>